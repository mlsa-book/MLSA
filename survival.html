<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Raphael Sonabend and Andreas Bender">
<title>Machine Learning in Survival Analysis - 4&nbsp; Survival Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./meas_what.html" rel="next">
<link href="./machinelearning.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./preview.html">Survival Analysis and Machine Learning</a></li><li class="breadcrumb-item"><a href="./survival.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Survival Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Machine Learning in Survival Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mlsa-book/MLSA/tree/main/book/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Machine-Learning-in-Survival-Analysis.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Symbols and Notation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Survival Analysis and Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">MLSA From Start to Finish</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./machinelearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistical Learning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./survival.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Survival Analysis</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Evaluation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_what.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are Survival Measures?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_rank.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Discrimination Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_calib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Calibration Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_rules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Evaluating Distributions by Scoring Rules</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Evaluating Survival Time</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./meas_choosing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Choosing Measures</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Classical Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlmodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Machine Learning Survival Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./forests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Tree-Based Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./svm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Support Vector Machines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./boosting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Boosting Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./neuralnetworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Neural Networks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./alternatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Alternative Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./models_choosing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Choosing Models</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Reduction Techniques</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reductions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reductions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./competing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Competing Risks Pipelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discretetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Discrete Time Survival Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./poisson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Connections to Poisson Regression and Processes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pseudo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Connections to Regression and Imputation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Advanced Methods</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Extensions and Outlook</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./common.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Common problems in survival analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Survival Software</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./next.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">What’s next for MLSA?</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercises</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#sec-surv-set" id="toc-sec-surv-set" class="nav-link active" data-scroll-target="#sec-surv-set"><span class="header-section-number">4.1</span> Survival Analysis</a>
  <ul class="collapse">
<li><a href="#sec-surv-set-math" id="toc-sec-surv-set-math" class="nav-link" data-scroll-target="#sec-surv-set-math"><span class="header-section-number">4.1.1</span> Survival Data and Definitions</a></li>
  <li><a href="#sec-surv-set-cens" id="toc-sec-surv-set-cens" class="nav-link" data-scroll-target="#sec-surv-set-cens"><span class="header-section-number">4.1.2</span> Censoring</a></li>
  </ul>
</li>
  <li><a href="#sec-surv-scope" id="toc-sec-surv-scope" class="nav-link" data-scroll-target="#sec-surv-scope"><span class="header-section-number">4.2</span> Book Scope</a></li>
  <li><a href="#sec-surv-set-types" id="toc-sec-surv-set-types" class="nav-link" data-scroll-target="#sec-surv-set-types"><span class="header-section-number">4.3</span> Survival Prediction Problems</a></li>
  <li><a href="#sec-surv-setmltask" id="toc-sec-surv-setmltask" class="nav-link" data-scroll-target="#sec-surv-setmltask"><span class="header-section-number">4.4</span> Survival Analysis Task</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/mlsa-book/MLSA/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/mlsa-book/MLSA/edit/main/book/survival.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/mlsa-book/MLSA/blob/main/book/survival.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./preview.html">Survival Analysis and Machine Learning</a></li><li class="breadcrumb-item"><a href="./survival.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Survival Analysis</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-surv" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Survival Analysis</span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    TODO (150-200 WORDS)
  </div>
</div>


</header><div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Major changes expected!
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This page is a work in progress and major changes will be made over time.</strong></p>
</div>
</div>
<hr>
<p>TODO</p>
<ul>
<li>Make sure intro is clear about censoring/truncation and that metrics can’t highlight if this is setup wrong - analogously to hypothesis testing not testing the result but hypothesis, p-hacking, etc.</li>
<li>If measures for right-censoring used in parts of pipelines hard to discern biases if wrong type of measure used</li>
<li>Same as dependent/independent censoring and measures problem</li>
</ul>
<hr>
<p>In their broadest and most basic definitions, survival analysis is the study of temporal data from a given origin until the occurrence of one or more events or ‘end-points’ <span class="citation" data-cites="Collett2014">(<a href="references.html#ref-Collett2014" role="doc-biblioref">Collett 2014</a>)</span>, and machine learning is the study of models and algorithms that learn from data in order to make predictions or find patterns <span class="citation" data-cites="Hastie2001">(<a href="references.html#ref-Hastie2001" role="doc-biblioref">Hastie, Tibshirani, and Friedman 2001</a>)</span>. Reducing either field to these definitions is ill-advised.</p>
<p>This chapter collects terminology utilised in survival analysis (<a href="#sec-surv-set" class="quarto-xref"><span>Section 4.1</span></a>) and machine learning (<a href="machinelearning.html#sec-surv-setml" class="quarto-xref"><span>Section 3.1</span></a>) in order that this book can cleanly discuss ‘machine learning survival analysis’ (<a href="#sec-surv-setmltask" class="quarto-xref"><span>Section 4.4</span></a>). Once the mathematical setting is set up, the book scope is fully presented in (<a href="#sec-surv-scope" class="quarto-xref"><span>Section 4.2</span></a>). Whilst the content of this chapter is not novel with respect to either survival analysis or machine learning separately, this does appear to be the first formulation of the survival analysis machine learning ‘task’ <span class="citation" data-cites="Kiraly2021">(<a href="references.html#ref-Kiraly2021" role="doc-biblioref">Király et al. 2021</a>)</span>.</p>
<section id="sec-surv-set" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="sec-surv-set">
<span class="header-section-number">4.1</span> Survival Analysis</h2>
<p>Survival analysis is the field of Statistics concerned with the analysis of time-to-event data, which consists of covariates, a categorical (often binary) outcome, and the time until this outcome takes place (the ‘survival time’). As a motivating example of time-to-event data, say 100 patients are admitted to a COVID-19 ward and for each patient the following covariate data are collected: age, weight and sex; additionally for each patient the time until death or discharge is recorded. In the time-to-event dataset, which takes a standard tabular form, each of the 100 patients is a row, with columns consisting of age, weight, and sex measurements, as well as the outcome (death or discharge) and the time to outcome.</p>
<p>Survival analysis is distinct from other areas of Statistics due to the incorporation of ‘censoring’, a mechanism for capturing uncertainty around when an event occurs in the real-world. Continuing the above example, if a patient dies of COVID-19 five dies after admittance, then their outcome is exactly known: they <em>died</em> after five days. Consider now a patient who is discharged after ten days. As death is a guaranteed event they have a true survival time but this may be decades later, therefore they are said to be <em>censored</em> at ten days. This is a convenient method to express that the patient survives up to ten days and their survival status at any time after this point is unknown. Censoring is a unique challenge to survival analysis that attempts to incorporate as much information as possible without knowing the true outcome. This is a ‘challenge’ as statistical models usually rely on learning from observed, i.e.&nbsp;known, outcome data; therefore censoring requires special treatment.</p>
<p>Whilst survival analysis occurs in many fields, for example as ‘reliability analysis’ in engineering and ‘duration analysis’ in economics, in this book the term ‘survival’ will always be used. Moreover the following terminology, analogous to a healthcare setting, are employed: survival analysis (or ‘survival’ for short) refers to the field of study; the event of interest is the ‘event’, or ‘death’; an observation that has not experienced an event is ‘censored’ or ‘alive’; and observations are referred to as ‘observations’, ‘subjects’, or ‘patients’.</p>
<p>Some of the biggest challenges in survival analysis stem from an unclear definition of a ‘survival analysis prediction’ and different (sometimes conflicting) common notations. This book attempts to make discussions around survival analysis clearer and more precise by first describing the mathematical setting for survival analysis in (<a href="#sec-surv-set-math" class="quarto-xref"><span>Section 4.1.1</span></a>) and only then defining the prediction types to consider in (<a href="#sec-surv-set-types" class="quarto-xref"><span>Section 4.3</span></a>).</p>
<section id="sec-surv-set-math" class="level3" data-number="4.1.1"><h3 data-number="4.1.1" class="anchored" data-anchor-id="sec-surv-set-math">
<span class="header-section-number">4.1.1</span> Survival Data and Definitions</h3>
<p>Survival analysis has a more complicated data setting than other fields as the ‘true’ data generating process is not directly modelled but instead engineered variables are defined to capture observed information. Let,</p>
<ul>
<li>
<span class="math inline">\(X \ t.v.i. \ \mathcal{X}\subseteq \mathbb{R}^p, p \in \mathbb{N}_{&gt; 0}\)</span> be the generative random variable representing the data <em>features</em>/<em>covariates</em>/<em>independent variables</em>.</li>
<li>
<span class="math inline">\(Y \ t.v.i. \ \mathcal{T}\subseteq \mathbb{R}_{\geq 0}\)</span> be the (unobservable) <em>true survival time</em>.</li>
<li>
<span class="math inline">\(C \ t.v.i. \ \mathcal{T}\subseteq \mathbb{R}_{\geq 0}\)</span> be the (unobservable) <em>true censoring time</em>.</li>
</ul>
<p>It is impossible to fully observe both <span class="math inline">\(Y\)</span> and <span class="math inline">\(C\)</span>. This is clear by example: if an observation drops out of a study then their censoring time is observed but their event time is not, whereas if an observation dies then their true censoring time is unknown. Hence, two engineered variables are defined to represent observable outcomes. Let,</p>
<ul>
<li>
<span class="math inline">\(T := \min\{Y,C\}\)</span> be the <em>observed outcome time</em>.</li>
<li>
<span class="math inline">\(\Delta := \mathbb{I}(Y = T) = \mathbb{I}(Y \leq C)\)</span> be the <em>survival indicator</em> (also known as the <em>censoring</em> or <em>event</em> indicator).</li>
</ul>
<p>Together <span class="math inline">\((T,\Delta)\)</span> is referred to as the <em>survival outcome</em> or <em>survival tuple</em> and they form the dependent variables. The survival outcome provides a concise mechanism for representing the time of the <em>observed</em> outcome and indicating which outcome (death or censoring) took place.</p>
<p>Now the full generative template for survival analysis is given by \ <span class="math inline">\((X, \Delta, C, Y, T) \ t.v.i. \ \mathcal{X}\times \{0,1\}\times \mathcal{T}\times \mathcal{T}\times \mathcal{T}\)</span> and with <span class="math inline">\((X_i, \Delta_i, C_i, Y_i, T_i)\)</span> jointly i.i.d. A <em>survival dataset</em> is defined by <span class="math inline">\(\mathcal{D}= \{(X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n)\}\)</span> where <span class="math inline">\((X_i,T_i,\Delta_i) \stackrel{i.i.d.}\sim(X,T,\Delta)\)</span> and <span class="math inline">\(X_i\)</span> is a <span class="math inline">\(p\)</span>-vector, <span class="math inline">\(X_i = (X_{i;1},...,X_{i;p})\)</span>. Though unobservable, the true outcome times are defined by <span class="math inline">\((Y_1,C_1),...,(Y_n,C_n)\)</span> where <span class="math inline">\((Y_i,C_i) \stackrel{i.i.d.}\sim(Y,C)\)</span>.</p>
<ol class="example" type="1">
<li>exemplifies a random survival dataset with <span class="math inline">\(n\)</span> observations (rows) and <span class="math inline">\(p\)</span> features.</li>
</ol>
<div id="tbl-surv-data-abs" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-surv-data-abs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.1: Theoretical time-to-event dataset. <span class="math inline">\((Y,C)\)</span> are ‘hypothetical’ as they can never be directly observed. Rows are individual observations, <span class="math inline">\(X\)</span> columns are features, <span class="math inline">\(T\)</span> is observed time-to-event, <span class="math inline">\(\Delta\)</span> is the censoring indicator, and <span class="math inline">\((Y,C)\)</span> are hypothetical true survival and censoring times.
</figcaption><div aria-describedby="tbl-surv-data-abs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 20%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th>X</th>
<th>X</th>
<th>X</th>
<th>T</th>
<th><span class="math inline">\(\Delta\)</span></th>
<th>Y</th>
<th>C</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X_{11}\)</span></td>
<td><span class="math inline">\(\cdots\)</span></td>
<td><span class="math inline">\(X_{1p}\)</span></td>
<td><span class="math inline">\(T_1\)</span></td>
<td><span class="math inline">\(\Delta_1\)</span></td>
<td><span class="math inline">\(Y_1\)</span></td>
<td><span class="math inline">\(C_1\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\ddots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
<td><span class="math inline">\(\vdots\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(X_{n1}\)</span></td>
<td><span class="math inline">\(\cdots\)</span></td>
<td><span class="math inline">\(X_{np}\)</span></td>
<td><span class="math inline">\(T_n\)</span></td>
<td><span class="math inline">\(\Delta_n\)</span></td>
<td><span class="math inline">\(Y_n\)</span></td>
<td><span class="math inline">\(C_n\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<ol start="2" class="example" type="1">
<li>exemplifies an observed survival dataset with a modified version of the <code>rats</code> dataset <span class="citation" data-cites="pkgsurvival">(<a href="references.html#ref-pkgsurvival" role="doc-biblioref">Therneau 2015</a>)</span>.</li>
</ol>
<div id="tbl-surv-data-rats" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-surv-data-rats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.2: <code>rats</code> <span class="citation" data-cites="pkgsurvival">(<a href="references.html#ref-pkgsurvival" role="doc-biblioref">Therneau 2015</a>)</span> time-to-event dataset with added hypothetical columns (<span class="math inline">\(Y,C\)</span>). Rows are individual observations, <span class="math inline">\(X\)</span> columns are features, <span class="math inline">\(T\)</span> is observed time-to-event, <span class="math inline">\(\Delta\)</span> is the censoring indicator, and <span class="math inline">\((Y,C)\)</span> are hypothetical (here arbitrary values dependent on <span class="math inline">\((T,\Delta)\)</span>) true survival and censoring times.
</figcaption><div aria-describedby="tbl-surv-data-rats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 20%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th>
<strong>litter</strong> <span class="math inline">\((X_{.;1})\)</span>
</th>
<th>
<strong>rx</strong> <span class="math inline">\((X_{.;2})\)</span>
</th>
<th>
<strong>sexF</strong> <span class="math inline">\((X_{.;3})\)</span>
</th>
<th>
<strong>time</strong> (T)</th>
<th>
<strong>status</strong> (<span class="math inline">\(\Delta\)</span>)</th>
<th>
<strong>survTime</strong> (Y)</th>
<th>
<strong>censTime</strong> (C)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>101</td>
<td>0</td>
<td>105</td>
<td>101</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>1</td>
<td>49</td>
<td>1</td>
<td>49</td>
<td>55</td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>1</td>
<td>104</td>
<td>0</td>
<td>200</td>
<td>104</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>0</td>
<td>91</td>
<td>0</td>
<td>92</td>
<td>91</td>
</tr>
<tr class="odd">
<td>2</td>
<td>0</td>
<td>0</td>
<td>104</td>
<td>1</td>
<td>104</td>
<td>104</td>
</tr>
<tr class="even">
<td>2</td>
<td>0</td>
<td>0</td>
<td>102</td>
<td>1</td>
<td>102</td>
<td>120</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Both datasets includes two extra columns, on the right of the triple vertical line, which imagine hypothetical data for the unobserved true survival and censoring times.</p>
<p>Finally the following terms are used frequently throughout this report. Let <span class="math inline">\((T_i, \Delta_i) \stackrel{i.i.d.}\sim(T,\Delta), i = 1,...,n\)</span>, be random survival outcomes. Then,</p>
<ul>
<li>The <em>set of unique</em> or <em>distinct time-points</em> refers to the set of time-points in which at least one observation dies or is censored, <span class="math inline">\(\mathcal{U}_O := \{T_i\}_{i \in \{1,...,n\}}\)</span>.</li>
<li>The <em>set of unique death times</em> refers to the set of unique time-points in which death (and not censoring) occurred, <span class="math inline">\(\mathcal{U}_D := \{T_i : \Delta_i = 1\}_{i \in \{1,...,n\}}\)</span>.</li>
<li>The <em>risk set</em> at a given time-point, <span class="math inline">\(\tau\)</span>, is the set of subjects who are known to be alive (not dead or censored) just before that time, <span class="math inline">\(\mathcal{R}_\tau := \{i: T_i \geq \tau\}\)</span> where <span class="math inline">\(i\)</span> is a unique row/subject in the data.</li>
<li>The <em>number of observations alive</em> at <span class="math inline">\(\tau\)</span> is the cardinality of the risk set, <span class="math inline">\(|\mathcal{R}_\tau|\)</span>, and is denoted by <span class="math inline">\(n_\tau := \sum_i \mathbb{I}(T_i \geq \tau)\)</span>.</li>
<li>The <em>number of observations who die</em> at <span class="math inline">\(\tau\)</span> is denoted by <span class="math inline">\(d_\tau := \sum_i \mathbb{I}(T_i = \tau, \Delta_i = 1)\)</span>.</li>
<li>The Kaplan-Meier estimate of the average survival function of the training data <em>survival distribution</em> is the Kaplan-Meier estimator (<a href="classical.html#sec-surv-models-uncond" class="quarto-xref"><span>Section 11.1.1</span></a>) fit (<a href="machinelearning.html#sec-surv-setml-meth" class="quarto-xref"><span>Section 3.1.1</span></a>) on training data <span class="math inline">\((T_i, \Delta_i)\)</span> and is denoted by <span class="math inline">\(\hat{S}_{KM}\)</span>.</li>
<li>The Kaplan-Meier estimate of the average survival function of the training data <em>censoring distribution</em> is the Kaplan-Meier estimator fit on training data <span class="math inline">\((T_i, 1 - \Delta_i)\)</span> and is denoted by <span class="math inline">\(\hat{G}_{KM}\)</span>.</li>
</ul>
<p>Notation and definitions will be recapped at the start of each chapter for convenience.</p>
</section><section id="sec-surv-set-cens" class="level3" data-number="4.1.2"><h3 data-number="4.1.2" class="anchored" data-anchor-id="sec-surv-set-cens">
<span class="header-section-number">4.1.2</span> Censoring</h3>
<p>Censoring is now discussed in more detail and important concepts introduced. Given the survival generating process <span class="math inline">\((X,T,\Delta)\)</span> with unobservable <span class="math inline">\((Y,C)\)</span>, the event is experienced if <span class="math inline">\(Y \leq C\)</span> and <span class="math inline">\(\Delta = 1\)</span> or censored if <span class="math inline">\(\Delta = 0\)</span>.</p>
<p>#### Censoring ‘Location’ {.unnumbered .unlisted}</p>
<p>Right-censoring is the most common form of censoring in survival models and it occurs either when a patient drops out (but doesn’t experience the event) of the study before the end and thus their outcome is unknown, or if they experience the event at some unknown point after the study end. Formally let <span class="math inline">\([\tau_l, \tau_u]\)</span> be the study period for some, <span class="math inline">\(\tau_l,\tau_u \in \mathbb{R}_{\geq 0}\)</span>. Then right-censoring occurs when either <span class="math inline">\(Y &gt; \tau_u\)</span> or when <span class="math inline">\(Y \in [\tau_l,\tau_u]\)</span> and <span class="math inline">\(C \leq Y\)</span>. In the first case <span class="math inline">\(T = C = \tau_u\)</span> and censoring is due to the true time of death being unknown as the observation period has finished. In the latter case, a separate censoring event, such as drop-out or another competing risk, is observed.</p>
<p>Left-censoring is a rarer form of censoring and occurs when the event happens at some unknown time before the study start, <span class="math inline">\(Y &lt; \tau_l\)</span>. Interval-censoring occurs when the event takes place in some interval within the study period, but the exact time of event is unknown. (<a href="#fig-survset-censor" class="quarto-xref">Figure&nbsp;<span>4.1</span></a>) shows a graphical representation of right-censoring.</p>
<div id="fig-survset-censor" class="quarto-figure quarto-figure-center quarto-float anchored" alt="TODO">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-survset-censor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Figures/survival/censoring.png" class="img-fluid figure-img" alt="TODO">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-survset-censor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.1: Dead and censored subjects (y-axis) over time (x-axis). Black diamonds indicate true death times and white circles indicate censoring times. Vertical line is the study end time. Subjects 1 and 2 die in the study time. Subject 3 is censored in the study and (unknown) dies within the study time. Subject 4 is censored in the study and (unknown) dies after the study. Subject 5 dies after the end of the study.
</figcaption></figure>
</div>
<section id="censoring-dependence" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="censoring-dependence">Censoring ‘Dependence’</h4>
<p>Censoring is often defined as <em>uninformative</em> if <span class="math inline">\(Y \perp \!\!\! \perp C\)</span> and <em>informative</em> otherwise however these definitions can be misleading as the term ‘uninformative’ appears to be imply that censoring is independent of both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, and not just <span class="math inline">\(Y\)</span>. Instead the following more precise definitions are used in this report.</p>
<div id="def-cens" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 4.1 (Censoring)</strong></span> Let <span class="math inline">\((X,T,\Delta,Y,C)\)</span> be defined as above, then</p>
<ul>
<li>If <span class="math inline">\(C \perp \!\!\! \perp X\)</span>, censoring is <em>feature-independent</em>, otherwise censoring is <em>feature-dependent</em>.</li>
<li>If <span class="math inline">\(C \perp \!\!\! \perp Y\)</span>, then censoring is <em>event-independent</em>, otherwise censoring is <em>event-dependent</em>.</li>
<li>If <span class="math inline">\((C \perp \!\!\! \perp Y) | X\)</span>, censoring is conditionally independent of the event given covariates, or <em>conditionally event-independent</em>.</li>
<li>If <span class="math inline">\(C \perp \!\!\! \perp(X,Y)\)</span> censoring is <em>uninformative</em>, otherwise censoring is <em>informative</em>.</li>
</ul>
</div>
<p>Non-informative censoring can generally be well-handled by models as true underlying patterns can still be detected and the reason for censoring does not affect model inference or predictions. However in the real-world, censoring is rarely non-informative as reasons for drop-out or missingness in outcomes tend to be related to the study of interest. Event-dependent censoring is a tricky case that, if not handled appropriately (by a competing-risks framework), can easily lead to poor model development; the reason for this can be made clear by example: Say a study is interested in predicting the time between relapses of stroke but a patient suffers a brain aneurysm due to some separate neurological condition, then there is a high possibility that a stroke may have occurred if the aneurysm had not. Therefore a survival model is unlikely to distinguish the censoring event (aneurysm) from the event of interest (stroke) and will confuse predictions. In practice, the majority of models and measures assume that censoring is conditionally event-independent and hence censoring can be predicted by the covariates whilst not directly depending on the event. For example if studying the survival time of ill pregnant patients in hospital, then dropping out of the study due to pregnancy is clearly dependent on how many weeks pregnant the patient is when the study starts (for the sake of argument assume no early/late pregnancy due to illness).</p>
</section><section id="type-i-censoring" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="type-i-censoring">Type I Censoring</h4>
<p>Type I and Type II censoring are special-cases of right-censoring, only Type I is discussed in this book as it is more common in simulation experiments. Type I censoring occurs if a study has a set end-date, or maximum survival time, and a patient survives until the end of the study. If survival times are dependent on covariates (i.e.&nbsp;not random) and the study start date is known (or survival times are shifted to the same origin) then Type I censoring will usually be informative as censored patients will be those who survived the longest.</p>
</section></section></section><section id="sec-surv-scope" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="sec-surv-scope">
<span class="header-section-number">4.2</span> Book Scope</h2>
<p>Now that the mathematical setting has been defined, the book scope is provided. For time and relevance the scope of this book is narrowed to the most parsimonious setting that is genuinely useful in modelling real-world scenarios. This is the setting that captures all assumptions made by the majority of proposed survival models and therefore is practical both theoretically and in application. This setting is defined by the following assumptions (with justifications):</p>
<ul>
<li>Let <span class="math inline">\(p\)</span> be the proportion of censored observations in the data, then <span class="math inline">\(p \in (0,1)\)</span>. This open interval prevents the case when <span class="math inline">\(p = 0\)</span>, which is simply a regression problem (<a href="machinelearning.html#sec-surv-ml-regr" class="quarto-xref"><span>Section 3.1.2.2</span></a>), or the case when <span class="math inline">\(p = 1\)</span>, in which no useful models exist (as the event never occurs).</li>
<li>Only right-censoring is observed in the data, no left- or interval-censoring. This accurately reflects most real-world data in which observations that have experienced the event before the study start (left-censoring) are usually not of interest, and close monitoring of patients means that interval-censoring is unlikely in practice. It is acknowledged that left-truncation is a common problem in medical datasets though this is often handled not by models but by data pre-processing, which is not part of the workflow discussed in this book.</li>
<li>There is only one event of interest, an observation that does not experience this event is censored. This eliminates the ‘competing risk’ setting in which multiple events of interest can be modelled.</li>
<li>The event can happen at most once. For example the event could be death or initial diagnosis of a disease however cannot be recurrent such as seizure. In the case where the event could theoretically happen multiple times, only the time to one (usually the first) occurrence of the event is modelled.</li>
<li>The event is guaranteed to happen at least once. This is an assumption implicitly made by all survival models as predictions are for the time until the true event, <span class="math inline">\(Y\)</span>, and not the observed outcome, <span class="math inline">\(T\)</span>.</li>
</ul>
<p>For both the multi-event and recurrent-event cases, simple reductions exist such that these settings can be handled by the models discussed in this paper however this is not discussed further here.</p>
<p>No assumptions are made about whether censoring is dependent on the data but when models and measures make these assumptions, they will be explicitly discussed.</p>
<p>The purpose of any statistical analysis is dependent on the research question. For example techniques are available for data analysis, imputation, exploration, prediction, and more. This book focuses on the predictive setting; other objectives, such as model inspection and data exploration can be achieved post-hoc via interpretable machine learning techniques <span class="citation" data-cites="Molnar2019">(<a href="references.html#ref-Molnar2019" role="doc-biblioref">Molnar 2019</a>)</span>.</p>
<p>Finally, the methods in this book are restricted to frequentist statistics. Bayesian methods are not discussed as the frequentist setting is usually more parsimonious and additionally there are comparatively very few off-shelf implementations of Bayesian survival methods. Despite this, it is noted that Bayesian methods are particularly relevant to the research in this book, which is primarily concerned with uncertainty estimates and predictions of distributions. Therefore, a natural extension to the work in this book would be to fully explore the Bayesian setting.</p>
</section><section id="sec-surv-set-types" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="sec-surv-set-types">
<span class="header-section-number">4.3</span> Survival Prediction Problems</h2>
<p>This section continues by defining the survival problem narrowed to the scope described in the previous section. Defining a single ‘survival prediction problem’ (or ‘task’) is important mathematically as conflating survival problems could lead to confused interpretation and evaluation of models. Let <span class="math inline">\((X,T,\Delta)\)</span> and <span class="math inline">\(\mathcal{D}\)</span> be as defined above. A general survival prediction problem is one in which:</p>
<ul>
<li>a survival dataset, <span class="math inline">\(\mathcal{D}\)</span>, is split (<a href="machinelearning.html#sec-surv-setml-meth" class="quarto-xref"><span>Section 3.1.1</span></a>) for training, <span class="math inline">\(\mathcal{D}_{train}\)</span>, and testing, <span class="math inline">\(\mathcal{D}_{test}\)</span>;</li>
<li>a survival model is fit on <span class="math inline">\(\mathcal{D}_{train}\)</span>; and</li>
<li>the model predicts some representation of the unknown true survival time, <span class="math inline">\(Y\)</span>, given <span class="math inline">\(\mathcal{D}_{test}\)</span>.</li>
</ul>
<p>The process of ‘fitting’ is model-dependent, and can range from simple maximum likelihood estimation of model coefficients, to complex algorithms. The model fitting process is discussed in more abstract detail in (<a href="machinelearning.html#sec-surv-setml" class="quarto-xref"><span>Section 3.1</span></a>) and then concrete algorithms are discussed in (<span class="quarto-unresolved-ref">?sec-review</span>). The different survival problems are separated by ‘prediction types’ or ‘prediction problems’, these can also be thought of as predictions of different ‘representations’ of <span class="math inline">\(Y\)</span>. Four prediction types are discussed in this paper, these may be the only possible survival prediction types and are certainly the most common as identified in chapters (<span class="quarto-unresolved-ref">?sec-review</span>) and (<a href="meas_what.html" class="quarto-xref"><span>Chapter 5</span></a>). They are predicting:</p>
<ul>
<li>The <em>relative risk</em> of an individual experiencing an event – A single continuous ranking.</li>
<li>The <em>time until an event</em> occurs – A single continuous value.</li>
<li>The <em>prognostic index</em> for a model – A single continuous value.</li>
<li>An individual’s <em>survival distribution</em> – A probability distribution.</li>
</ul>
<p>The first three of these are referred to as <em>deterministic</em> problems as they predict a single value whereas the fourth is <em>probabilistic</em> and returns a full survival distribution. Definitions of these are expanded on below.</p>
<p>Survival predictions differ from other fields in two respects. Firstly, the predicted outcome, <span class="math inline">\(Y\)</span>, is a different object than the outcome used for model training, <span class="math inline">\((T, \Delta)\)</span>. This differs from, say, regression in which the same object (a single continuous variable) is used for fitting and predicting. Secondly, with the exception of the time-to-event prediction, all other prediction types do not predict <span class="math inline">\(Y\)</span> but some other related quantity.</p>
<p>Survival prediction problems must be clearly separated as they are inherently incompatible. For example it is not meaningful to compare a relative risk prediction from one observation to a survival distribution of another. Whilst these prediction types are separated above, they can be viewed as special cases of each other. Both (1) and (2) may be viewed as variants of (3); and (1), (2), and (3) can all be derived from (4); this is elaborated on below.</p>
<section id="relative-riskranking" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="relative-riskranking">Relative Risk/Ranking</h4>
<p>This is perhaps the most common survival problem and is defined as predicting a continuous rank for an individual’s ‘relative risk of experiencing the event’. For example, given three patients, <span class="math inline">\(\{i,j,k\}\)</span>, a relative risk prediction may predict the ‘risk of event’ as <span class="math inline">\(\{0.1, 0.5, 10\}\)</span> respectively. From these predictions, the following types of conclusions can be drawn:</p>
<ul>
<li>Conclusions comparing patients. e.g.&nbsp;<span class="math inline">\(i\)</span> is at the least risk; the risk of <span class="math inline">\(j\)</span> is only slightly higher than that of <span class="math inline">\(i\)</span> but the risk of <span class="math inline">\(k\)</span> is considerably higher than <span class="math inline">\(j\)</span>; the corresponding ranks for <span class="math inline">\(i,j,k,\)</span> are <span class="math inline">\(1,2,3\)</span>.</li>
<li>Conclusions comparing risk groups. e.g.&nbsp;thresholding risks at <span class="math inline">\(1.0\)</span> places <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> in a ‘low-risk’ group and <span class="math inline">\(k\)</span> in a ‘high-risk’ group</li>
</ul>
<p>So whilst many important conclusions can be drawn from these predictions, the values themselves have no meaning when not compared to other individuals. Interpretation of these rankings has historically been conflicting in implementation, with some software having the interpretation ‘higher ranking implies higher risk’ whereas others may indicate ‘higher ranking implies lower risk’ <span class="math inline">\(\ref{sec:tools_mlr3proba_api_learn}\)</span>. In this book, a higher ranking will always imply a higher risk of event (as in the example above).</p>
</section><section id="time-to-event" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="time-to-event">Time to Event</h4>
<p>Predicting a time to event is the problem of predicting the deterministic survival time of a patient, i.e.&nbsp;the amount of time for which they are predicted to be alive after some given start time. Part of the reason this problem is less common in survival analysis is because it borders regression – a single continuous value is predicted – and survival – the handling of censoring is required – but neither is designed to solve this problem directly. Time-to-event predictions can be seen as a special-case of the ranking problem as an individual with a predicted longer survival time will have a lower overall risk, i.e.&nbsp;if <span class="math inline">\(t_i,t_j\)</span> and <span class="math inline">\(r_i,r_j\)</span> are survival time and ranking predictions for patients <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> respectively, then <span class="math inline">\(t_i &gt; t_j \rightarrow r_i &lt; r_j\)</span>.</p>
</section><section id="prognostic-index" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="prognostic-index">Prognostic Index</h4>
<p>Given covariates, <span class="math inline">\(x \in \mathbb{R}^{n \times p}\)</span>, and a vector of model coefficients, <span class="math inline">\(\beta \in \mathbb{R}^p\)</span>, the linear predictor is defined by <span class="math inline">\(\eta := x\beta \in \mathbb{R}^n\)</span>. The ‘prognostic index’ is a term that is often used in survival analysis papers that usually refers to some transformation (possibly identity), <span class="math inline">\(\phi\)</span>, on the linear predictor, <span class="math inline">\(\phi(\eta)\)</span>. Assuming a predictive function (for survival time, risk, or distribution defining function (see below)) of the form <span class="math inline">\(g(\varphi)\phi(\eta)\)</span>, for some function <span class="math inline">\(g\)</span> and variables <span class="math inline">\(\varphi\)</span> where <span class="math inline">\(g(\varphi)\)</span> is constant for all observations (e.g.&nbsp;Cox PH (<a href="classical.html#sec-surv-models-crank" class="quarto-xref"><span>Section 11.1.2</span></a>)), then predictions of <span class="math inline">\(\eta\)</span> are a special case of predicting a relative risk, as are predictions of <span class="math inline">\(\phi(\eta)\)</span> if <span class="math inline">\(\phi\)</span> is rank preserving. A higher prognostic index may imply a higher or lower risk of event, dependent on the model structure.</p>
</section><section id="survival-distribution" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="survival-distribution">Survival Distribution</h4>
<p>Predicting a survival distribution refers specifically to predicting the distribution of an individual patient’s survival time, i.e.&nbsp;modelling the distribution of the event occurring over <span class="math inline">\(\mathbb{R}_{\geq 0}\)</span>. Therefore this is seen as the probabilistic analogue to the deterministic time-to-event prediction, these definitions are motivated by similar terminology in machine learning regression problems (<a href="machinelearning.html#sec-surv-setml" class="quarto-xref"><span>Section 3.1</span></a>). The above three prediction types can all be derived from a probabilistic survival distribution prediction (<a href="reductions.html" class="quarto-xref"><span>Chapter 19</span></a>).</p>
<p>A survival distribution is a mathematical object that is estimated by predicting a <em>representation</em> of the distribution. Let <span class="math inline">\(W\)</span> be a continuous random variable t.v.i. <span class="math inline">\(\mathbb{R}_{\geq 0}\)</span> with probability density function (pdf), <span class="math inline">\(f_W: \mathbb{R}_{\geq 0}\rightarrow \mathbb{R}_{\geq 0}\)</span>, and cumulative distribution function (cdf), <span class="math inline">\(F_W: \mathbb{R}_{\geq 0}\rightarrow [0,1]; (\tau) \mapsto P(W \leq \tau)\)</span>. The pdf, <span class="math inline">\(f_W(\tau)\)</span>, is the likelihood of an observation dying in a small interval around time <span class="math inline">\(\tau\)</span>, and <span class="math inline">\(F_W(\tau) = \int^\tau_0 f_W(\tau)\)</span> is the probability of an observation being dead at time <span class="math inline">\(\tau\)</span> (i.e.&nbsp;dying at or before <span class="math inline">\(\tau\)</span>). In survival analysis, it is generally more interesting to model the risk of the event taking place or the probability of the patient being alive, leading to other distribution representations of interest.</p>
<p>The survival function is defined as <span class="math display">\[
S_W: \mathbb{R}_{\geq 0}\rightarrow [0,1]; \quad
(\tau) \mapsto P(W \geq \tau) = \int^\infty_\tau f_W(u) \ du
\]</span> and so <span class="math inline">\(S_W(\tau) = 1-F_W(\tau)\)</span>. This function is known as the survival function as it can be interpreted as the probability that a given individual survives until some point <span class="math inline">\(\tau \geq 0\)</span>.</p>
<p>Another common representation is the hazard function, <span class="math display">\[
h_W: \mathbb{R}_{\geq 0}\rightarrow \mathbb{R}_{\geq 0}; \quad
(\tau) \mapsto  \frac{f_W(\tau)}{S_W(\tau)}
\]</span> The hazard function is interpreted as the instantaneous risk of death given that the observation has survived up until that point; note this is not a probability as <span class="math inline">\(h_W\)</span> can be greater than one.</p>
<p>The cumulative hazard function (chf) can be derived from the hazard function by <span class="math display">\[
H_W: \mathbb{R}_{\geq 0}\rightarrow \mathbb{R}_{\geq 0}; \quad
(\tau) \mapsto \int^\tau_0 h_W(u) \ du
\]</span></p>
<p>The cumulative hazard function relates simply to the survival function by <span class="math display">\[
H_W(\tau) = \int^\tau_0 h_W(u) \ du = \int^\tau_0 \frac{f_W(u)}{S_W(u)} \ du = \int^\tau_0 -\frac{S'_W(u)}{S_W(u)} \ du = -\log(S_W(\tau))
\]</span></p>
<p>Any of these representations may be predicted conditionally on covariates for an individual by a probabilistic survival distribution prediction. Once a function has been estimated, predictions can be made conditional on the given data. For example if <span class="math inline">\(n\)</span> survival functions are predicted, <span class="math inline">\(\hat{S}_1,...,\hat{S}_n\)</span>, then <span class="math inline">\(\hat{S}_i\)</span> is interpreted as the predicted survival function given covariates of observation <span class="math inline">\(i\)</span>, and analogously for the other representation functions.</p>
</section></section><section id="sec-surv-setmltask" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="sec-surv-setmltask">
<span class="header-section-number">4.4</span> Survival Analysis Task</h2>
<p>The survival prediction problems identified in (<a href="#sec-surv-set-types" class="quarto-xref"><span>Section 4.3</span></a>) are now formalised as machine learning tasks.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Survival Task
</div>
</div>
<div class="callout-body-container callout-body">
<div id="cnj-task-surv" class="theorem conjecture">
<p><span class="theorem-title"><strong>Box 4.1</strong></span> Let <span class="math inline">\((X,T,\Delta)\)</span> be random variables t.v.i. <span class="math inline">\(\mathcal{X}\times \mathcal{T}\times \{0,1\}\)</span> where <span class="math inline">\(\mathcal{X}\subseteq \mathbb{R}^p\)</span> and <span class="math inline">\(\mathcal{T}\subseteq \mathbb{R}_{\geq 0}\)</span>. Let <span class="math inline">\(\mathcal{S}\subseteq \ensuremath{\operatorname{Distr}(\mathcal{T})}\)</span> be a convex set of distributions on <span class="math inline">\(\mathcal{T}\)</span> and let <span class="math inline">\(\mathcal{R}\subseteq \mathbb{R}\)</span>. Then,</p>
<ul>
<li>The <em>probabilistic survival task</em> is the problem of predicting a conditional distribution over the positive Reals and is specified by <span class="math inline">\(g: \mathcal{X}\rightarrow \mathcal{S}\)</span>.</li>
<li>The <em>deterministic survival task</em> is the problem of predicting a continuous value in the positive Reals and is specified by <span class="math inline">\(g: \mathcal{X}\rightarrow \mathcal{T}\)</span>.</li>
<li>The <em>survival ranking task</em> is specified by predicting a continuous ranking in the Reals and is specified by <span class="math inline">\(g: \mathcal{X}\rightarrow \mathcal{R}\)</span>.</li>
</ul>
<p>The estimated prediction functional <span class="math inline">\(\hat{g}\)</span> is fit on training data \<span class="math inline">\((X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n) \stackrel{i.i.d.}\sim(X,T,\Delta)\)</span> and is considered ‘good’ if \<span class="math inline">\(\mathbb{E}[L(T^*, \Delta^*, \hat{g}(X^*))]\)</span> is low, where <span class="math inline">\((X^*, T^*, \Delta^*) \sim (X, T, \Delta)\)</span> is independent of <span class="math inline">\((X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n)\)</span> and <span class="math inline">\(\hat{g}\)</span>.</p>
</div>
</div>
</div>
<p>Any other survival prediction type falls within one of these tasks above, for example predicting log-survival time is the deterministic task and predicting prognostic index or linear predictor is the ranking task. Removing the separation between the prognostic index and ranking prediction types is due to them both making predictions over the Reals; their mathematical difference lies in interpretation only. In general, the survival task will assume that <span class="math inline">\(\mathcal{T}\subseteq \mathbb{R}_{\geq 0}\)</span>, and the terms ‘discrete’ or ‘reduced survival task’ will refer to the case when <span class="math inline">\(\mathcal{T}\subseteq \mathbb{N}_{&gt; 0}\)</span>. Unless otherwise specified, the ‘survival task’, will be used to refer to the probabilistic survival task.</p>
<section id="survival-analysis-and-regression" class="level4 unnumbered unlisted"><h4 class="unnumbered unlisted anchored" data-anchor-id="survival-analysis-and-regression">Survival Analysis and Regression</h4>
<p>Survival and regression tasks are closely related as can be observed from their respective definitions. Both are specified by <span class="math inline">\(g : \mathcal{X}\rightarrow \mathcal{S}\)</span> where for probabilistic regression <span class="math inline">\(\mathcal{S}\subseteq \operatorname{Distr}(\mathbb{R})\)</span> and for survival <span class="math inline">\(\mathcal{S}\subseteq \operatorname{Distr}(\mathbb{R}_{\geq 0})\)</span>. Furthermore both settings can be viewed to use the same generative process. In the survival setting in which there is no censoring then data is drawn from <span class="math inline">\((X,Y) \ t.v.i. \ \mathcal{X}\times \mathcal{T}, \mathcal{T}\subseteq \mathbb{R}_{\geq 0}\)</span> and in regression from <span class="math inline">\((X,Y) \ t.v.i. \ \mathcal{X}\times \mathcal{Y}, \mathcal{Y}\subseteq \mathbb{R}\)</span>, so that the only difference is whether the outcome data ranges over the Reals or positive Reals.</p>
<p>These closely related tasks are discussed in more detail in (<a href="reductions.html" class="quarto-xref"><span>Chapter 19</span></a>), with a particular focus on how the more popular regression setting can be used to solve survival tasks. In (<span class="quarto-unresolved-ref">?sec-review</span>) the models are first introduced in a regression setting and then the adaptations to survival are discussed, which is natural when considering that historically machine learning survival models have been developed by adapting regression models.</p>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Collett2014" class="csl-entry" role="listitem">
Collett, David. 2014. <em><span class="nocase">Modelling Survival Data in Medical Research</span></em>. 3rd ed. CRC.
</div>
<div id="ref-Hastie2001" class="csl-entry" role="listitem">
Hastie, Trevor, Robert Tibshirani, and Jerome Friedman. 2001. <em><span class="nocase">The Elements of Statistical Learning</span></em>. Springer New York Inc.
</div>
<div id="ref-Kiraly2021" class="csl-entry" role="listitem">
Király, Franz J., Markus Löning, Anthony Blaom, Ahmed Guecioueur, and Raphael Sonabend. 2021. <span>“<span class="nocase">Designing Machine Learning Toolboxes: Concepts, Principles and Patterns</span>.”</span> <em>arXiv</em>, January. <a href="http://arxiv.org/abs/2101.04938">http://arxiv.org/abs/2101.04938</a>.
</div>
<div id="ref-Molnar2019" class="csl-entry" role="listitem">
Molnar, Christoph. 2019. <em><span>Interpretable Machine Learning</span></em>. <a href="https://christophm.github.io/interpretable-ml-book/">https://christophm.github.io/interpretable-ml-book/</a>.
</div>
<div id="ref-pkgsurvival" class="csl-entry" role="listitem">
Therneau, Terry M. 2015. <span>“<span class="nocase">A Package for Survival Analysis in S</span>.”</span> <a href="https://cran.r-project.org/package=survival">https://cran.r-project.org/package=survival</a>.
</div>
</div>
</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./machinelearning.html" class="pagination-link  aria-label=" learning="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Statistical Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./meas_what.html" class="pagination-link" aria-label="<span class='chapter-number'>5</span>&nbsp; <span class='chapter-title'>What are Survival Measures?</span>">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are Survival Measures?</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">abstract:</span><span class="co"> TODO (150-200 WORDS)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>{{&lt; include _setup.qmd &gt;}}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu"># Survival Analysis {#sec-surv}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>{{&lt; include _wip.qmd &gt;}}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>___</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>TODO</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Make sure intro is clear about censoring/truncation and that metrics can't highlight if this is setup wrong - analogously to hypothesis testing not testing the result but hypothesis, p-hacking, etc.</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If measures for right-censoring used in parts of pipelines hard to discern biases if wrong type of measure used</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Same as dependent/independent censoring and measures problem</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>___</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>In their broadest and most basic definitions, survival analysis is the study of temporal data from a given origin until the occurrence of one or more events or 'end-points'  <span class="co">[</span><span class="ot">@Collett2014</span><span class="co">]</span>, and machine learning is the study of models and algorithms that learn from data in order to make predictions or find patterns  <span class="co">[</span><span class="ot">@Hastie2001</span><span class="co">]</span>. Reducing either field to these definitions is ill-advised.</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>This chapter collects terminology utilised in survival analysis (@sec-surv-set) and machine learning (@sec-surv-setml) in order that this book can cleanly discuss 'machine learning survival analysis' (@sec-surv-setmltask). Once the mathematical setting is set up, the book scope is fully presented in (@sec-surv-scope). Whilst the content of this chapter is not novel with respect to either survival analysis or machine learning separately, this does appear to be the first formulation of the survival analysis machine learning 'task'  <span class="co">[</span><span class="ot">@Kiraly2021</span><span class="co">]</span>.</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fu">## Survival Analysis {#sec-surv-set}</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>Survival analysis is the field of Statistics concerned with the analysis of time-to-event data, which consists of covariates, a categorical (often binary) outcome, and the time until this outcome takes place (the 'survival time'). As a motivating example of time-to-event data, say 100 patients are admitted to a COVID-19 ward and for each patient the following covariate data are collected: age, weight and sex; additionally for each patient the time until death or discharge is recorded. In the time-to-event dataset, which takes a standard tabular form, each of the 100 patients is a row, with columns consisting of age, weight, and sex measurements, as well as the outcome (death or discharge) and the time to outcome.</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>Survival analysis is distinct from other areas of Statistics due to the incorporation of 'censoring', a mechanism for capturing uncertainty around when an event occurs in the real-world. Continuing the above example, if a patient dies of COVID-19 five dies after admittance, then their outcome is exactly known: they *died* after five days. Consider now a patient who is discharged after ten days. As death is a guaranteed event they have a true survival time but this may be decades later, therefore they are said to be *censored* at ten days. This is a convenient method to express that the patient survives up to ten days and their survival status at any time after this point is unknown. Censoring is a unique challenge to survival analysis that attempts to incorporate as much information as possible without knowing the true outcome. This is a 'challenge' as statistical models usually rely on learning from observed, i.e. known, outcome data; therefore censoring requires special treatment.</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>Whilst survival analysis occurs in many fields, for example as 'reliability analysis' in engineering and 'duration analysis' in economics, in this book the term 'survival' will always be used. Moreover the following terminology, analogous to a healthcare setting, are employed: survival analysis (or 'survival' for short) refers to the field of study; the event of interest is the 'event', or 'death'; an observation that has not experienced an event is 'censored' or 'alive'; and observations are referred to as 'observations', 'subjects', or 'patients'.</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>Some of the biggest challenges in survival analysis stem from an unclear definition of a 'survival analysis prediction' and different (sometimes conflicting) common notations. This book attempts to make discussions around survival analysis clearer and more precise by first describing the mathematical setting for survival analysis in (@sec-surv-set-math) and only then defining the prediction types to consider in (@sec-surv-set-types).</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="fu">### Survival Data and Definitions {#sec-surv-set-math}</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>Survival analysis has a more complicated data setting than other fields as the 'true' data generating process is not directly modelled but instead engineered variables are defined to capture observed information. Let,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>$X \ t.v.i. \ \calX \subseteq \Reals^p, p \in \PNaturals$ be the generative random variable  representing the data *features*/*covariates*/*independent variables*.</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>$Y \ t.v.i. \ \calT \subseteq \NNReals$ be the (unobservable) *true survival time*.</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>$C \ t.v.i. \ \calT \subseteq \NNReals$ be the (unobservable) *true censoring time*.</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>It is impossible to fully observe both $Y$ and $C$. This is clear by example: if an observation drops out of a study then their censoring time is observed but their event time is not, whereas if an observation dies then their true censoring time is unknown. Hence, two engineered variables are defined to represent observable outcomes. Let,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>$T := \min<span class="sc">\{</span>Y,C<span class="sc">\}</span>$ be the *observed outcome time*.</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>$\Delta := \II(Y = T) = \II(Y \leq C)$ be the *survival indicator* (also known as the *censoring* or *event* indicator).\footnote{Indicators are usually named to reflect a positive condition in the function (in this case the event when $Y = T$), but counter to this convention the 'censoring indicator' is possibly the most common term.}</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>Together $(T,\Delta)$ is referred to as the *survival outcome* or *survival tuple* and they form the dependent variables. The survival outcome provides a concise mechanism for representing the time of the *observed* outcome and indicating which outcome (death or censoring) took place.</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>Now the full generative template for survival analysis is given by <span class="sc">\\</span> $(X, \Delta, C, Y, T) \ t.v.i. \ \calX \times \bset \times \calT \times \calT \times \calT$ and with $(X_i, \Delta_i, C_i, Y_i, T_i)$ jointly i.i.d. A *survival dataset* is defined by $\calD = <span class="sc">\{</span>(X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n)<span class="sc">\}</span>$ where $(X_i,T_i,\Delta_i) \iid (X,T,\Delta)$ and $X_i$ is a $p$-vector, $X_i = (X_{i;1},...,X_{i;p})$. Though unobservable, the true outcome times are defined by $(Y_1,C_1),...,(Y_n,C_n)$ where $(Y_i,C_i) \iid (Y,C)$.</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>(@tab-surv-data-abs) exemplifies a random survival dataset with $n$ observations (rows) and $p$ features.</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>| X | X | X | T | $\Delta$ | Y | C |</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>| -- | -- | --- | -- | --| -- | -- |</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>| $X_{11}$ | $\cdots$ | $X_{1p}$ | $T_1$ | $\Delta_1$ | $Y_1$ | $C_1$ |</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>| $\vdots$ | $\ddots$ | $\vdots$ | $\vdots$ | $\vdots$ | $\vdots$ | $\vdots$ |</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>| $X_{n1}$ | $\cdots$ | $X_{np}$ | $T_n$ | $\Delta_n$ | $Y_n$ | $C_n$ |</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>: Theoretical time-to-event dataset. $(Y,C)$ are 'hypothetical' as they can never be directly observed. Rows are individual observations, $X$ columns are features, $T$ is observed time-to-event, $\Delta$ is the censoring indicator, and $(Y,C)$ are hypothetical true survival and censoring times. {#tbl-surv-data-abs}</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>(@tab-surv-data-rats) exemplifies an observed survival dataset with a modified version of the <span class="in">`rats`</span> dataset  <span class="co">[</span><span class="ot">@pkgsurvival</span><span class="co">]</span>.</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>| **litter** $(X_{.;1})$ | **rx** $(X_{.;2})$ | **sexF** $(X_{.;3})$ | **time** (T) | **status** ($\Delta$) | **survTime** (Y) | **censTime** (C) |</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>| -- | -- | --- | -- | --| -- | -- |</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>| 1 | 1 | 1 | 101 | 0 | 105 | 101  |</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>| 1 | 0 | 1 | 49 | 1 | 49 | 55|</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>| 1 | 0 | 1 | 104 | 0 | 200 | 104 |</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>| 2 | 1 | 0 | 91 | 0 | 92 | 91 |</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>| 2 | 0 | 0 | 104 | 1 | 104 | 104 |</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>| 2 | 0 | 0 | 102 | 1 | 102 | 120 |</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>: <span class="in">`rats`</span>  <span class="co">[</span><span class="ot">@pkgsurvival</span><span class="co">]</span> time-to-event dataset with added hypothetical columns ($Y,C$). Rows are individual observations, $X$ columns are features, $T$ is observed time-to-event, $\Delta$ is the censoring indicator, and $(Y,C)$ are hypothetical (here arbitrary values dependent on $(T,\Delta)$) true survival and censoring times. {#tbl-surv-data-rats}</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>Both datasets includes two extra columns, on the right of the triple vertical line, which imagine hypothetical data for the unobserved true survival and censoring times.</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>Finally the following terms are used frequently throughout this report. Let $(T_i, \Delta_i) \iid (T,\Delta), i = 1,...,n$, be random survival outcomes. Then,</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *set of unique* or *distinct time-points* refers to the set of time-points in which at least one observation dies or is censored, $\calU_O := \{T_i\}_{i \in <span class="sc">\{</span>1,...,n<span class="sc">\}</span>}$.</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *set of unique death times* refers to the set of unique time-points in which death (and not censoring) occurred, $\calU_D := \{T_i : \Delta_i = 1\}_{i \in <span class="sc">\{</span>1,...,n<span class="sc">\}</span>}$.</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *risk set* at a given time-point, $\tau$, is the set of subjects who are known to be alive (not dead or censored) just before that time, $\calR_\tau := <span class="sc">\{</span>i: T_i \geq \tau<span class="sc">\}</span>$ where $i$ is a unique row/subject in the data.</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *number of observations alive* at $\tau$ is the cardinality of the risk set, $|\calR_\tau|$, and is denoted by $n_\tau := \sum_i \II(T_i \geq \tau)$.</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *number of observations who die* at $\tau$ is denoted by $d_\tau := \sum_i \II(T_i = \tau, \Delta_i = 1)$.</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The Kaplan-Meier estimate of the average survival function of the training data *survival distribution* is the Kaplan-Meier estimator (@sec-surv-models-uncond) fit (@sec-surv-setml-meth) on training data $(T_i, \Delta_i)$ and is denoted by $\KMS$.</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The Kaplan-Meier estimate of the average survival function of the training data *censoring distribution* is the Kaplan-Meier estimator fit on training data $(T_i, 1 - \Delta_i)$ and is denoted by $\KMG$.</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>Notation and definitions will be recapped at the start of each chapter for convenience.</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a><span class="fu">### Censoring {#sec-surv-set-cens}</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>Censoring is now discussed in more detail and important concepts introduced. Given the survival generating process $(X,T,\Delta)$ with unobservable $(Y,C)$, the event is experienced if $Y \leq C$ and $\Delta = 1$ or censored if $\Delta = 0$.</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>\noindent #### Censoring 'Location' {.unnumbered .unlisted}</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>Right-censoring is the most common form of censoring in survival models and it occurs either when a patient drops out (but doesn't experience the event) of the study before the end and thus their outcome is unknown, or if they experience the event at some unknown point after the study end. Formally let $<span class="co">[</span><span class="ot">\tau_l, \tau_u</span><span class="co">]</span>$ be the study period for some, $\tau_l,\tau_u \in \NNReals$. Then right-censoring occurs when either $Y &gt; \tau_u$ or when $Y \in <span class="co">[</span><span class="ot">\tau_l,\tau_u</span><span class="co">]</span>$ and $C \leq Y$. In the first case $T = C = \tau_u$ and censoring is due to the true time of death being unknown as the observation period has finished. In the latter case, a separate censoring event, such as drop-out or another competing risk, is observed.</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>Left-censoring is a rarer form of censoring and occurs when the event happens at some unknown time before the study start, $Y &lt; \tau_l$. Interval-censoring occurs when the event takes place in some interval within the study period, but the exact time of event is unknown. (@fig-survset-censor) shows a graphical representation of right-censoring.</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="al">![Dead and censored subjects (y-axis) over time (x-axis). Black diamonds indicate true death times and white circles indicate censoring times. Vertical line is the study end time. Subjects 1 and 2 die in the study time. Subject 3 is censored in the study and (unknown) dies within the study time. Subject 4 is censored in the study and (unknown) dies after the study. Subject 5 dies after the end of the study.](Figures/survival/censoring.png)</span>{#fig-survset-censor fig-alt="TODO"}</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Censoring 'Dependence' {.unnumbered .unlisted}</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>Censoring is often defined as *uninformative* if $Y \indep C$ and *informative* otherwise however these definitions can be misleading as the term 'uninformative' appears to be imply that censoring is independent of both $X$ and $Y$, and not just $Y$. Instead the following more precise definitions are used in this report.</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>::: {#def-cens}</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a><span class="fu">## Censoring</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>Let $(X,T,\Delta,Y,C)$ be defined as above, then</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If $C \indep X$, censoring is *feature-independent*, otherwise censoring is *feature-dependent*.</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If $C \indep Y$, then censoring is *event-independent*, otherwise censoring is *event-dependent*.</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If $(C \indep Y) | X$, censoring is conditionally independent of the event given covariates, or *conditionally event-independent*.</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>If $C \indep (X,Y)$ censoring is *uninformative*, otherwise censoring is *informative*.</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>Non-informative censoring can generally be well-handled by models as true underlying patterns can still be detected and the reason for censoring does not affect model inference or predictions. However in the real-world, censoring is rarely non-informative as reasons for drop-out or missingness in outcomes tend to be related to the study of interest. Event-dependent censoring is a tricky case that, if not handled appropriately (by a competing-risks framework), can easily lead to poor model development; the reason for this can be made clear by example: Say a study is interested in predicting the time between relapses of stroke but a patient suffers a brain aneurysm due to some separate neurological condition, then there is a high possibility that a stroke may have occurred if the aneurysm had not. Therefore a survival model is unlikely to distinguish the censoring event (aneurysm) from the event of interest (stroke) and will confuse predictions. In practice, the majority of models and measures assume that censoring is conditionally event-independent and hence censoring can be predicted by the covariates whilst not directly depending on the event. For example if studying the survival time of ill pregnant patients in hospital, then dropping out of the study due to pregnancy is clearly dependent on how many weeks pregnant the patient is when the study starts (for the sake of argument assume no early/late pregnancy due to illness).</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Type I Censoring {.unnumbered .unlisted}</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>Type I and Type II censoring are special-cases of right-censoring, only Type I is discussed in this book as it is more common in simulation experiments. Type I censoring occurs if a study has a set end-date, or maximum survival time, and a patient survives until the end of the study. If survival times are dependent on covariates (i.e. not random) and the study start date is known (or survival times are shifted to the same origin) then Type I censoring will usually be informative as censored patients will be those who survived the longest.</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="fu">## Book Scope {#sec-surv-scope}</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>Now that the mathematical setting has been defined, the book scope is provided. For time and relevance the scope of this book is narrowed to the most parsimonious setting that is genuinely useful in modelling real-world scenarios. This is the setting that captures all assumptions made by the majority of proposed survival models and therefore is practical both theoretically and in application. This setting is defined by the following assumptions (with justifications):</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Let $p$ be the proportion of censored observations in the data, then $p \in (0,1)$. This open interval prevents the case when $p = 0$, which is simply a regression problem (@sec-surv-ml-regr), or the case when $p = 1$, in which no useful models exist (as the event never occurs).</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Only right-censoring is observed in the data, no left- or interval-censoring. This accurately reflects most real-world data in which observations that have experienced the event before the study start (left-censoring) are usually not of interest, and close monitoring of patients means that interval-censoring is unlikely in practice. It is acknowledged that left-truncation is a common problem in medical datasets though this is often handled not by models but by data pre-processing, which is not part of the workflow discussed in this book.</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>There is only one event of interest, an observation that does not experience this event is censored. This eliminates the 'competing risk' setting in which multiple events of interest can be modelled.</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The event can happen at most once. For example the event could be death or initial diagnosis of a disease however cannot be recurrent such as seizure. In the case where the event could theoretically happen multiple times, only the time to one (usually the first) occurrence of the event is modelled.</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The event is guaranteed to happen at least once. This is an assumption implicitly made by all survival models as predictions are for the time until the true event, $Y$, and not the observed outcome, $T$.</span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>For both the multi-event and recurrent-event cases, simple reductions exist such that these settings can be handled by the models discussed in this paper however this is not discussed further here.</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>No assumptions are made about whether censoring is dependent on the data but when models and measures make these assumptions, they will be explicitly discussed.</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>The purpose of any statistical analysis is dependent on the research question. For example techniques are available for data analysis, imputation, exploration, prediction, and more. This book focuses on the predictive setting; other objectives, such as model inspection and data exploration can be achieved post-hoc via interpretable machine learning techniques  <span class="co">[</span><span class="ot">@Molnar2019</span><span class="co">]</span>.</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>Finally, the methods in this book are restricted to frequentist statistics. Bayesian methods are not discussed as the frequentist setting is usually more parsimonious and additionally there are comparatively very few off-shelf implementations of Bayesian survival methods. Despite this, it is noted that Bayesian methods are particularly relevant to the research in this book, which is primarily concerned with uncertainty estimates and predictions of distributions. Therefore, a natural extension to the work in this book would be to fully explore the Bayesian setting.</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="fu">## Survival Prediction Problems {#sec-surv-set-types}</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>This section continues by defining the survival problem narrowed to the scope described in the previous section. Defining a single 'survival prediction problem' (or 'task') is important mathematically as conflating survival problems could lead to confused interpretation and evaluation of models. Let $(X,T,\Delta)$ and $\calD$ be as defined above. A general survival prediction problem is one in which:</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>a survival dataset, $\calD$, is split (@sec-surv-setml-meth) for training, $\dtrain$, and testing, $\dtest$;</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>a survival model is fit on $\dtrain$; and</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>the model predicts some representation of the unknown true survival time, $Y$, given $\dtest$.</span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>The process of 'fitting' is model-dependent, and can range from simple maximum likelihood estimation of model coefficients, to complex algorithms.  The model fitting process is discussed in more abstract detail in (@sec-surv-setml) and then concrete algorithms are discussed in (@sec-review). The different survival problems are separated by 'prediction types' or 'prediction problems', these can also be thought of as predictions of different 'representations' of $Y$. Four prediction types are discussed in this paper, these may be the only possible survival prediction types and are certainly the most common as identified in chapters (@sec-review) and (@sec-eval).  They are predicting:</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *relative risk* of an individual experiencing an event -- A single continuous ranking.</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *time until an event* occurs -- A single continuous value.</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *prognostic index* for a model -- A single continuous value.</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>An individual's *survival distribution* -- A probability distribution.</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>The first three of these are referred to as *deterministic* problems as they predict a single value whereas the fourth is *probabilistic* and returns a full survival distribution. Definitions of these are expanded on below.</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>Survival predictions differ from other fields in two respects. Firstly, the predicted outcome, $Y$, is a different object than the outcome used for model training, $(T, \Delta)$. This differs from, say, regression in which the same object (a single continuous variable) is used for fitting and predicting. Secondly, with the exception of the time-to-event prediction, all other prediction types do not predict $Y$ but some other related quantity.</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>Survival prediction problems must be clearly separated as they are inherently incompatible. For example it is not meaningful to compare a relative risk prediction from one observation to a survival distribution of another. Whilst these prediction types are separated above, they can be viewed as special cases of each other. Both (1) and (2) may be viewed as variants of (3); and (1), (2), and (3) can all be derived from (4); this is elaborated on below.</span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Relative Risk/Ranking {.unnumbered .unlisted}</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>This is perhaps the most common survival problem and is defined as predicting a continuous rank for an individual's 'relative risk of experiencing the event'. For example, given three patients, $<span class="sc">\{</span>i,j,k<span class="sc">\}</span>$, a relative risk prediction may predict the 'risk of event' as $<span class="sc">\{</span>0.1, 0.5, 10<span class="sc">\}</span>$ respectively. From these predictions, the following types of conclusions can be drawn:</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Conclusions comparing patients. e.g. $i$ is at the least risk; the risk of $j$ is only slightly higher than that of $i$ but the risk of $k$ is considerably higher than $j$; the corresponding ranks for $i,j,k,$ are $1,2,3$.</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Conclusions comparing risk groups. e.g. thresholding risks at $1.0$ places $i$ and $j$ in a 'low-risk' group and $k$ in a 'high-risk' group</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>So whilst many important conclusions can be drawn from these predictions, the values themselves have no meaning when not compared to other individuals. Interpretation of these rankings has historically been conflicting in implementation, with some software having the interpretation 'higher ranking implies higher risk' whereas others may indicate 'higher ranking implies lower risk' \ref{sec:tools_mlr3proba_api_learn}. In this book, a higher ranking will always imply a higher risk of event (as in the example above).</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Time to Event {.unnumbered .unlisted}</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>Predicting a time to event is the problem of predicting the deterministic survival time of a patient, i.e. the amount of time for which they are predicted to be alive after some given start time. Part of the reason this problem is less common in survival analysis is because it borders regression -- a single continuous value is predicted -- and survival -- the handling of censoring is required -- but neither is designed to solve this problem directly. Time-to-event predictions can be seen as a special-case of the ranking problem as an individual with a predicted longer survival time will have a lower overall risk, i.e. if $t_i,t_j$ and $r_i,r_j$ are survival time and ranking predictions for patients $i$ and $j$ respectively, then $t_i &gt; t_j \rightarrow r_i &lt; r_j$.</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Prognostic Index {.unnumbered .unlisted}</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>Given covariates, $x \in \Reals^{n \times p}$, and a vector of model coefficients, $\beta \in \Reals^p$, the linear predictor is defined by $\eta := x\beta \in \Reals^n$. The 'prognostic index' is a term that is often used in survival analysis papers that usually refers to some transformation (possibly identity), $\phi$, on the linear predictor, $\phi(\eta)$. Assuming a predictive function (for survival time, risk, or distribution defining function (see below)) of the form $g(\varphi)\phi(\eta)$, for some function $g$ and variables $\varphi$ where $g(\varphi)$ is constant for all observations (e.g. Cox PH (@sec-surv-models-crank)), then predictions of $\eta$ are a special case of predicting a relative risk, as are predictions of $\phi(\eta)$ if $\phi$ is rank preserving. A higher prognostic index may imply a higher or lower risk of event, dependent on the model structure.</span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Survival Distribution {.unnumbered .unlisted}</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>Predicting a survival distribution refers specifically to predicting the distribution of an individual patient's survival time, i.e. modelling the distribution of the event occurring over $\NNReals$. Therefore this is seen as the probabilistic analogue to the deterministic time-to-event prediction, these definitions are motivated by similar terminology in machine learning regression problems (@sec-surv-setml). The above three prediction types can all be derived from a probabilistic survival distribution prediction (@sec-car).</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>A survival distribution is a mathematical object that is estimated by predicting a *representation* of the distribution. Let $W$ be a continuous random variable t.v.i. $\NNReals$ with probability density function (pdf), $f_W: \NNReals \rightarrow \NNReals$, and cumulative distribution function (cdf), $F_W: \NNReals \rightarrow <span class="co">[</span><span class="ot">0,1</span><span class="co">]</span>; (\tau) \mapsto P(W \leq \tau)$. The pdf, $f_W(\tau)$, is the likelihood of an observation dying in a small interval around time $\tau$, and $F_W(\tau) = \int^\tau_0 f_W(\tau)$ is the probability of an observation being dead at time $\tau$ (i.e. dying at or before $\tau$). In survival analysis, it is generally more interesting to model the risk of the event taking place or the probability of the patient being alive, leading to other distribution representations of interest.</span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>The survival function is defined as</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>S_W: \NNReals \rightarrow <span class="co">[</span><span class="ot">0,1</span><span class="co">]</span>; \quad</span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>(\tau) \mapsto P(W \geq \tau) = \int^\infty_\tau f_W(u) \ du</span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>and so $S_W(\tau) = 1-F_W(\tau)$. This function is known as the survival function as it can be interpreted as the probability that a given individual survives until some point $\tau \geq 0$.</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>Another common representation is the hazard function,</span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>h_W: \NNReals \rightarrow \NNReals; \quad</span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>(\tau) \mapsto  \frac{f_W(\tau)}{S_W(\tau)}</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>The hazard function is interpreted as the instantaneous risk of death given that the observation has survived up until that point; note this is not a probability as $h_W$ can be greater than one.</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>The cumulative hazard function (chf) can be derived from the hazard function by</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>H_W: \NNReals \rightarrow \NNReals; \quad</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>(\tau) \mapsto \int^\tau_0 h_W(u) \ du</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>The cumulative hazard function relates simply to the survival function by</span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>H_W(\tau) = \int^\tau_0 h_W(u) \ du = \int^\tau_0 \frac{f_W(u)}{S_W(u)} \ du = \int^\tau_0 -\frac{S'_W(u)}{S_W(u)} \ du = -\log(S_W(\tau))</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>Any of these representations may be predicted conditionally on covariates for an individual by a probabilistic survival distribution prediction. Once a function has been estimated, predictions can be made conditional on the given data. For example if $n$ survival functions are predicted, $\hat{S}_1,...,\hat{S}_n$, then $\hat{S}_i$ is interpreted as the predicted survival function given covariates of observation $i$, and analogously for the other representation functions.</span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a><span class="fu">## Survival Analysis Task {#sec-surv-setmltask}</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>The survival prediction problems identified in (@sec-surv-set-types) are now formalised as machine learning tasks.</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>:::: {.callout-note icon=false}</span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a><span class="fu">## Survival Task</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>::: {#cnj-task-surv}</span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>Let $(X,T,\Delta)$ be random variables t.v.i. $\calX \times \calT \times \bset$ where $\calX \subseteq \Reals^p$ and $\calT \subseteq \NNReals$. Let $\calS \subseteq \distrT$ be a convex set of distributions on $\calT$ and let $\calR \subseteq \Reals$. Then,</span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *probabilistic survival task* is the problem of predicting a conditional distribution over the positive Reals and is specified by $g: \calX \rightarrow \calS$.</span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *deterministic survival task* is the problem of predicting a continuous value in the positive Reals and is specified by $g: \calX \rightarrow \calT$.</span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The *survival ranking task* is specified by predicting a continuous ranking in the Reals and is specified by $g: \calX \rightarrow \calR$.</span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a>The estimated prediction functional $\hatg$ is fit on training data <span class="sc">\\</span>$(X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n) \iid (X,T,\Delta)$ and is considered 'good' if <span class="sc">\\</span>$\EE<span class="co">[</span><span class="ot">L(T^*, \Delta^*, \hatg(X^*))</span><span class="co">]</span>$ is low, where $(X^*, T^*, \Delta^*) \sim (X, T, \Delta)$ is independent of $(X_1,T_1,\Delta_1),...,(X_n,T_n,\Delta_n)$ and $\hatg$.</span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>::::</span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a>Any other survival prediction type falls within one of these tasks above, for example predicting log-survival time is the deterministic task and predicting prognostic index or linear predictor is the ranking task. Removing the separation between the prognostic index and ranking prediction types is due to them both making predictions over the Reals; their mathematical difference lies in interpretation only. In general, the survival task will assume that $\calT \subseteq \NNReals$, and the terms 'discrete' or 'reduced survival task' will refer to the case when $\calT \subseteq \PNaturals$. Unless otherwise specified, the 'survival task', will be used to refer to the probabilistic survival task.\footnote{These definitions are given in the most general case where the time variable is over $\NNReals$. In practice, all models instead assume time is over $\PReals$ and any death at $T_i = 0$ is set to $T_i = \epsilon$ for some very small $\epsilon \in \PReals$. Analogously for the discrete survival task. This assumption may not reflect reality as a patient could die at the study start however models cannot typically include this information in training.}</span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Survival Analysis and Regression {.unnumbered .unlisted}</span></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>Survival and regression tasks are closely related as can be observed from their respective definitions. Both are specified by $g : \calX \rightarrow \calS$ where for probabilistic regression $\calS \subseteq \Distr(\Reals)$ and for survival $\calS \subseteq \Distr(\NNReals)$. Furthermore both settings can be viewed to use the same generative process. In the survival setting in which there is no censoring then data is drawn from $(X,Y) \ t.v.i. \ \calX \times \calT, \calT \subseteq \NNReals$ and in regression from $(X,Y) \ t.v.i. \ \calX \times \calY, \calY \subseteq \Reals$, so that the only difference is whether the outcome data ranges over the Reals or positive Reals.</span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>These closely related tasks are discussed in more detail in (@sec-car), with a particular focus on how the more popular regression setting can be used to solve survival tasks. In (@sec-review) the models are first introduced in a regression setting and then the adaptations to survival are discussed, which is natural when considering that historically machine learning survival models have been developed by adapting regression models.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>All content licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> <br> © Raphael Sonabend, Andreas Bender.</p>
</div>   
    <div class="nav-footer-center">
<p><a href="https://www.mlsabook.com">Website</a> | <a href="https://github.com/mlsa-book/MLSA">GitHub</a></p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mlsa-book/MLSA/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/mlsa-book/MLSA/edit/main/book/survival.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/mlsa-book/MLSA/blob/main/book/survival.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>